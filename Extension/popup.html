<!doctype html>

<html lang="en">
<head>
  <meta charset="utf-8">

  <title>The HTML5 Herald</title>
  <meta name="description" content="Minute Meditation">

  <meta name="Joanna Folk & Saurav (सौरभ केसी) KC" content="Minute Meditation">
    <!--
    Project Minute Meditation
    For Tech Takes on Mental Health
    By: Joanna Folk & Saurav (सौरभ केसी) KC
    Purpose: Sometimes we need a quick break from things.  A breather where we ground ourselves throughout the day.
    That is why I decided to make a minute meditation app, that allows you to pause what you're doing and focus on your breathing.
    -->

    <style>
      body {
        min-width:600px;
      }
      /* Grid */
      .row {
        display: flex;
        flex-wrap: wrap;
        margin: 0 auto;
        max-width: 600px;
        justify-content: center;
        align-items: center;
      }

      img {
          width: 100%;
      }

      /* Animation */
      .rotate {
        animation: rotation 8s infinite linear;
      }

      @keyframes rotation {
        from {
          transform: rotate(0deg);
        }
        to {
          transform: rotate(359deg);
        }
      }

      .fade-in {
        animation: fadeIn ease 3s;
      }
      @keyframes fadeIn {
        0% {opacity:0;}
        100% {opacity:1;}
      }

      /* Audio Image */
      #audioControl img {
        width: 80px;
        height: 80px;
      }

      #pause {
        width: 80px;
        height: 80px;
      }
    </style>
  </head>

  <body>
    <!-- Nav Bar -->
    <img src="./images/navBar.jpg" alt="Navigation bar stating minute meditation"/>

    <!-- Grid -->
    <div class="row">

      <!-- Flower Images -->
      <div class="cell"><img src="./images/smallFlower.gif" alt="a small flower illustration" id="smallFlowerRight" class="fade-in" /></div>
      <div class="cell"><img src="./images/largeFlower.gif" alt="a large flower centered in the middle" id="largeFlower" class="fade-in" /></div>
      <div class="cell"><img src="./images/smallFlower.gif" alt="another small flower illustration" id="smallFlowerLeft" class="fade-in" /></div>

    </div>

    <!-- Second Row -->
    <div class="row">

    <!-- Start Button -->
    <div class="cell">
      <img id="play" onclick="changeImage()" alt="start meditation" src="images/playOff.png" class="fade-in" width="80" height="80">
    </div>

    <!-- Progress Button -->
    <div class="cell"><img src="images/barOne.gif" id="progress" class="fade-in" alt="progress bar"></div>

    <!-- Audio Player -->
    <!-- Song by Siddhartha Corsus - The Heart Sings -->
    <div class="cell">
      <audio id="audioFile">
        <source src="audio.mp3" type="audio/mpeg">
      </audio>
      <a class='musicOff' href="#!"><img src="images/volumeOff.png" alt="start music" class="fade-in" id="myImg"></a>
    </div>

    <!-- End Quote -->
    <div class="cell">
      <img src="images/quote.gif" alt="End quote: Breathe conquers the mind" id="quote" style="display: none">
      <img src="images/instructions.png" alt="Instructions: Be still and breathe in and out" id="instructions" style="display: none">
    </div>

    <!-- Preloaded Audio Gong -->
    <audio id="alertSound" src="gong.mp3" preload="auto"></audio>
    </div>

    <script src="popup.js"></script>

    <script src="https://khaalipaper.com/js/jquery-3.2.1.min.js"></script>

    <!-- Audio Script -->
    <script>
      function changeImg() {
        var image = document.getElementById('myImg');
        if (image.src.match("play-audio.png")) {
          image.src = "stop-audio.png";
        }
        else {
          image.src = "play-audio.png";
        }
      }
      $(document).ready(function(){
        $(".musicOff").click(function(){
          var image = document.getElementById('myImg');
          var x = document.getElementById("audioFile");
          x.play();
          if (image.src.match("images/volumeOff.png")) {
            image.src = "images/volumeOn.png";
          }
          else {
            image.src = "images/volumeOff.png";
            x.pause();
          }
        });
      });
    </script>

    <!-- Play Button -->
    <script>
      let largeFlower = document.getElementById("largeFlower");
      let smallFlowerRight = document.getElementById("smallFlowerRight");
      let smallFlowerLeft = document.getElementById("smallFlowerLeft");

      function changeImage()
      {
        element=document.getElementById('play')
        if (element.src.match("Off"))
        {
          element.src="images/playOn.png";
          largeFlower.className = "rotate";
          document.getElementById('instructions').style.display = 'block';

          // Down & dirty timer functions
          setTimeout(function(){
            document.getElementById('progress').src = "images/barTwo.gif";
          }, 8571);

          setTimeout(function(){
            document.getElementById('progress').src = "images/barThree.gif";
          }, 17142);

          setTimeout(function(){
            document.getElementById('progress').src = "images/barFour.gif";
          }, 25713);

          setTimeout(function(){
            document.getElementById('progress').src = "images/barFive.gif";
          }, 34284);

          setTimeout(function(){
            document.getElementById('progress').src = "images/barSix.gif";
          }, 42855);

          setTimeout(function(){
            document.getElementById('progress').src = "images/barSeven.gif";
          }, 51426);

          setTimeout(function(){
            document.getElementById('alertSound').play();
            document.getElementById('quote').style.display = "block";
            document.getElementById('instructions').style.display = 'none';
            document.getElementById('progress').src = "images/barEight.gif";
            document.getElementById('smallFlowerLeft').className = "rotate";
            document.getElementById('smallFlowerRight').className = "rotate";
          }, 60000);

          setTimeout(function(){
            document.getElementById('progress').src = "images/barFinishedOne.gif";
          }, 60600);

          setTimeout(function(){
            document.getElementById('progress').src = "images/barFinishedTwo.gif";
          }, 60800);

          setTimeout(function(){
            document.getElementById('progress').src = "images/barFinishedThree.gif";
          }, 61000);


        }

        /* TODO: Figure out how to stop prior timers - Pauses movement
        else
        {
          element.src="images/playOff.png";
          largeFlower.className = "";
          document.getElementById('progress').src = "images/barOne.gif";
        } */
      }

    </script>

  </body>
</html>
